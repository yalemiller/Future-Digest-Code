/*
ROLE: Persistent foreground + sliding background
WHAT IT DOES:
- Fixed stage covers viewport (does not scroll)
- Background stack has 2 panels (gradient on top, green below)
- Transition Scene2 -> Scene3: background slides up, foreground stays put
*/

:root {
  --accent:#1aa0b3;

  /* NEW */
  --artScale: 1.55;   /* 1 = normal, 1.2 = bigger, 0.8 = smaller */
}

.fixedStage{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  pointer-events: none; /* foreground UI will re-enable where needed */
}

/* ----- BACKGROUND STACK ----- */
.bgStack{
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 200vh;          /* two full-screen panels stacked */
  transform: translateY(0);
  transition: transform 900ms cubic-bezier(.22,1,.36,1);
  z-index: 0;
}

/* slide to green (reveals 2nd panel) */
body.bg-is-green .bgStack{
  transform: translateY(-100vh);
}

.bgPanel{
  width: 100vw;
  height: 100vh;
  position: relative;
}

/* Panel 1: gradient scene */
.bgPanel--gradient{
  background: linear-gradient(#b7b7ff, #dfead2);
}

/* Hill in gradient panel */
.grass{
  position:absolute;
  left:-14%;
  right:-14%;
  bottom:-24%;
  height:48%;
  background:#2fe07a;
  border-radius: 60% 60% 0 0;
  z-index: 1;

  /* intro entrance defaults (hidden) */
  opacity: 0;
  transform: translateY(80px);
  transition: transform 750ms cubic-bezier(.22,1,.36,1), opacity 750ms ease;
}

/* Sun in gradient panel */
.sun{
  position:absolute;
  top: 6vh;
  left: 18vw;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: #ced50c;
  overflow:hidden;
  z-index: 2;

  /* intro entrance defaults (hidden) */
  opacity: 0;
  transform: translateY(60px);
  transition: transform 750ms cubic-bezier(.22,1,.36,1), opacity 750ms ease;
}
.sun::after{
  content:"";
  position:absolute;
  inset:-70px;
  background: url("./photocopy.jpg") repeat;
  background-size: 800px 800px;
  opacity: 1;
  mix-blend-mode: overlay;
  pointer-events: none;
}

/* Sun + grass scroll on in Scene1/Scene2 */
body.intro-bg-on .sun,
body.intro-bg-on .grass{
  opacity: 1;
  transform: translateY(0);
}

/* Panel 2: solid green background */
.bgPanel--green{
  background: #2fe07a;
}

/* ----- FOREGROUND ----- */
.foreground{
  position: absolute;
  inset: 0;
  z-index: 5;
  pointer-events: none; /* only specific UI is clickable */
}

/* Left overlay */
.leftOverlay{
  position: absolute;
  left: 6vw;
  top: 44vh;
  transform: translateY(-50%);
  width: min(720px, 56vw);
  pointer-events: auto; /* allow input interaction */
}

.headline{
  font-size: clamp(44px, 4.4vw, 64px);
  color: var(--accent);
  margin: 0 0 18px;
  line-height: 1.08;
  letter-spacing: -0.5px;
}

.subtitleLine{
  margin-top: -6px;
}

/* Input */
.inputRow{
  width: min(560px, 92%);
}

#foodInput{
  width: 100%;
  font-size: clamp(30px, 3vw, 44px);
  border: none;
  outline: none;
  background: transparent;
  color: var(--accent);
  padding: 10px 0;
}

.underline{
  height: 5px;
  width: 100%;
  background: var(--accent);
  border-radius: 999px;
}

.hint{
  margin-top: 12px;
  color: rgba(0,0,0,0.45);
  font-size: 15px;
}

.microHint{
  margin-top: 12px;
  color: rgba(0,0,0,0.55);
  font-size: 15px;
}

/* ------------------------------
   Right character (viewport stays constant)
   PNG "scrolls" by moving .phoneArt
------------------------------ */

.phone{
  position: absolute;
  top: 0;
  right: 2vw;
  width: min(40vw, 100vw);
  height: 100vh;          /* IMPORTANT: constant across scenes */
  pointer-events: none;
  overflow: show;       /* mask */
}

/* IMPORTANT: wrapper must exist in HTML */
.phoneArt{
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--artH, 100vh);

  transform:
    translateY(var(--artY, 0vh))
    scale(var(--artScale));

  transform-origin: top center;

  transition: transform 900ms cubic-bezier(.22,1,.36,1);
}

/* Image fills the wrapper */
.phoneImg{
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* Belly overlay aligns to the same coordinate space as the PNG */
.phoneBelly{
  position: absolute;
  left: 18%;
  top: 30%;
  width: 64%;
  height: 54%;
  padding: 18px;

  display: flex;
  z-index: 5;
  flex-direction: column;
  justify-content: flex-end;
  gap: 16px;

  overflow: hidden;
}

/* Food blocks */
.foodBlock{
  position: relative;
  height: 92px;
  border-radius: 18px;
  overflow: hidden;
  display: grid;
  place-items: center;

  transition: opacity 260ms ease;
}

.foodBlock svg{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  z-index: 0;
}

.foodBlock .label{
  position: relative;
  z-index: 2;
  font-weight: 800;
  font-size: 42px;
  color: #fff;
  line-height: 1;
  padding: 0 16px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.foodBlock::after{
  content:"";
  position:absolute;
  inset:-18px;
  background: url("./photocopy.jpg") repeat;
  background-size: 700px 700px;
  mix-blend-mode: overlay;
  opacity: 0.9;
  z-index: 1;
  pointer-events:none;
}

.vizStage{
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 56vw;

  /* center a card */
  display: flex;
  align-items: center;
  justify-content: center;

  padding: 0vh 2vw;       /* breathing room */
  pointer-events: none;
}

.focusCard{
  width: 200%;
  height: min(90vh, 90vh);     /* “card” height */
  border-radius: 40px;
  background: var(--foodColor, #8E79FF);

  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;

  box-shadow: 0 22px 60px rgba(0,0,0,0.18);
  overflow: hidden;

  /* fade animation */
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 420ms ease, transform 420ms ease;
}

/* toggled on when focus is active */
.focusCard.isVisible{
  opacity: 1;
  transform: translateY(0);
}

.focusLabel{
  font-size: 54px;
  font-weight: 900;
  color: #fff;
  line-height: 1;
  padding: 0 18px;
  text-align: center;
}

.focusSub{
  font-size: 14px;
  color: rgba(255,255,255,0.85);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.foodBlock.isFocus{
  opacity: 1;
}

.foodBlock.isNotFocus{
  opacity: 0.45;
}

/* ---------- Intro scenes ---------- */
.logoLockup{
  margin-bottom: 18px;
}
.logoMark{
  font-size: clamp(54px, 5vw, 84px);
  font-weight: 900;
  letter-spacing: -1px;
  color: var(--accent);
  line-height: 1.0;
}
.logoSub{
  margin-top: 10px;
  font-size: 16px;
  color: rgba(0,0,0,0.55);
}

.introBody{
  margin: 6px 0 0;
  font-size: 18px;
  line-height: 1.45;
  color: rgba(0,0,0,0.6);
  max-width: 54ch;
}

/* --------------------------
   SceneIntro vs Scene1:
   PNG simply "scrolls down"
--------------------------- */

/* Make the PNG taller than the viewport so we can pan */
body.head-only,
body.chest-frame{
  --artH: 200vh;
}

/* SceneIntro: show top portion */
body.head-only{
  --artY: 0vh;
}

/* Hide belly blocks in intro */
body.head-only .phoneBelly{
  display: none;
}

/* Scene1+: show middle portion (tune --artY to land belly) */
body.chest-frame{
  --artY: -105vh;
}

/* ---------- Scene 0: Title Screen ---------- */

.scene0Title{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
  background: white;
}

.scene0Title img{
  width: min(70vw, 720px);
  height: auto;
}

/* Hide everything else in Scene 0 */
body.scene0-active .phone,
body.scene0-active .leftOverlay,
body.scene0-active .vizStage{
  opacity: 0;
  pointer-events: none;
}